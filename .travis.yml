before_install:
  - sudo apt-get update
  - sudo apt-get install -y libpthread-stubs0-dev libgl1-mesa-dev libx11-dev libxrandr-dev libfreetype6-dev libglew1.5-dev libjpeg8-dev libsndfile1-dev libopenal-dev libudev-dev libxcb-image0-dev libjpeg-dev libflac-dev libsfml-dev
language: cpp
compiler: clang
services: xvfb
dist: bionic
script:
  - cd src
  - make -j10
  - bash -c 'if ! ./ug-test; then >&2 echo "Fail"; exit 1; fi'
  - bash -c 'if ! xvfb-run --server-args="-screen 0 1280x1024x24" -e /dev/stdout -a node tests/integration/smoke_tests.js; then >&2 echo "Fail"; exit 1; fi'
